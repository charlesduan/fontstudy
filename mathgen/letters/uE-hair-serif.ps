%
% E-beakdark.ps
%
flattenpath

0.5 vertSplitLine pathLineIntc sortByY /EVertSplit exch def

EVertSplit 4 2 getinterval loadArray
/ETopTop defPoint /ETopBot defPoint
ETopTop uppointbox ETopBot pointbox

{ ETopBot startAtPoint ETopTop endAtPoint } traceSubpath
{ pathExtremes } useSubpath sortByY firstElt /EBeakBot defPoint
EBeakBot pointbox

ETopBot EBeakBot 0.8 interpPoint
horizLineThrough pathLineIntc sortByX revArray 0 2 getinterval loadArray
/EBeakInside defPoint /EBeakOutside defPoint
EBeakOutside rtpointbox EBeakInside ltpointbox

ETopBot EBeakBot 0.85 interpPoint
horizLineThrough pathLineIntc sortByX revArray 0 2 getinterval loadArray
loadArray EBeakInside -6 interpPoint /EBeakInsideExt defPoint
loadArray EBeakOutside -6 interpPoint /EBeakOutsideExt defPoint
EBeakOutsideExt rtpointbox EBeakInsideExt ltpointbox

EBeakOutside EBeakOutsideExt drawLine EBeakBot horizLineThrough intersect pop
/OutIntersection defPoint

EBeakInside EBeakInsideExt drawLine EBeakBot horizLineThrough intersect pop
/InIntersection defPoint

OutIntersection rtpointbox InIntersection ltpointbox

(Hair by beak thickness)
OutIntersection xcoor InIntersection xcoor sub
stringOfText
